{"version":3,"sources":["../src/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["import hrtime from './hrtime'\n\n/**\n * @param {number} value Time in nanoseconds\n * @return {string}\n */\nlet defaultFormatter = (value) => {\n  if (value < 1e3) {\n    return `${value}ns`\n  }\n\n  if (value < 1e6) {\n    return `${(value / 1e3).toFixed(3)}us`\n  }\n\n  if (value < 1e9) {\n    return `${(value / 1e6).toFixed(3)}ms`\n  }\n\n  return `${(value / 1e9).toFixed(3)}s`\n}\n\n/**\n * @class ElapsedTime\n */\nexport default class ElapsedTime {\n  /**\n   * @constructor\n   * @param {Object} [opts]\n   * @param {function} [opts.formatter]\n   */\n  constructor (opts) {\n    this._prevTime = null\n    this._savedTime = null\n\n    this._formatter = Object(opts).formatter\n    if (typeof this._formatter !== 'function') {\n      this._formatter = defaultFormatter\n    }\n  }\n\n  /**\n   * @param {Object} [opts]\n   * @param {function} [opts.formatter]\n   * @return {ElapsedTime}\n   */\n  static new (opts) { return new ElapsedTime(opts) }\n\n  /**\n   * @param {function} formatter\n   */\n  static setDefaultFormatter (formatter) { defaultFormatter = formatter }\n\n  /**\n   * @return {ElapsedTime}\n   */\n  start () {\n    if (this._prevTime !== null || this._savedTime !== null) {\n      throw new Error('ElapsedTime already started, please call `reset` first!')\n    }\n\n    this._prevTime = hrtime()\n    this._savedTime = null\n\n    return this\n  }\n\n  /**\n   * @return {ElapsedTime}\n   */\n  pause () {\n    if (this._prevTime === null && this._savedTime === null) {\n      throw new Error('ElapsedTime not started, please call `start` first!')\n    }\n\n    if (this._savedTime !== null) {\n      throw new Error('ElapsedTime already paused, please call `resume` first!')\n    }\n\n    let [seconds, nanoseconds] = hrtime(this._prevTime)\n\n    this._prevTime = null\n    this._savedTime = seconds * 1e9 + nanoseconds\n\n    return this\n  }\n\n  /**\n   * @return {ElapsedTime}\n   */\n  resume () {\n    if (this._prevTime === null && this._savedTime === null) {\n      throw new Error('ElapsedTime not started, please call `start` first!')\n    }\n\n    if (this._savedTime === null) {\n      throw new Error('ElapsedTime not paused, please call `pause` first!')\n    }\n\n    let [seconds, nanoseconds] = hrtime()\n    seconds -= Math.floor(this._savedTime / 1e9)\n    nanoseconds -= this._savedTime % 1e9\n    if (nanoseconds < 0) {\n      seconds -= 1\n      nanoseconds += 1e9\n    }\n\n    this._prevTime = [seconds, nanoseconds]\n    this._savedTime = null\n\n    return this\n  }\n\n  /**\n   * @param {number} timeout\n   * @return {ElapsedTime}\n   */\n  sleep (timeout) {\n    this.pause()\n    setTimeout(::this.resume, timeout)\n\n    return this\n  }\n\n  /**\n   * @return {ElapsedTime}\n   */\n  reset () {\n    this._prevTime = null\n    this._savedTime = null\n\n    return this\n  }\n\n  /**\n   * @return {number}\n   */\n  getRawValue () {\n    if (this._prevTime === null && this._savedTime === null) {\n      throw new Error('ElapsedTime not started yet, please call `start` first!')\n    }\n\n    if (this._savedTime !== null) {\n      return this._savedTime\n    }\n\n    let [seconds, nanoseconds] = hrtime(this._prevTime)\n    return seconds * 1e9 + nanoseconds\n  }\n\n  /**\n   * @param {Object} [opts]\n   * @param {function} [opts.formatter]\n   * @return {string}\n   */\n  getValue (opts) {\n    let formatter = Object(opts).formatter\n    if (typeof formatter !== 'function') {\n      formatter = this._formatter\n    }\n\n    return formatter(this.getRawValue())\n  }\n}\n"]}